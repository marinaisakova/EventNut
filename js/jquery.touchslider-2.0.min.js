
/**
 * Copyright (c) 2011-2013 Mobile Web Solutions Inc, d/b/a MobilizeToday.com
 * All rights reserved.
 *
 * License: MIT
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Version: 2.0
 */

// touchSlider.js Loader.js Mapper.js Renderer.js Helper.js Helper.Control.js Helper.Counter.js Helper.PrevNext.js Helper.SelectedItem.js Loader.Static.js Mapper.Auto.js Mapper.Content.js Mapper.Index.js Mapper.IndexCyclic.js Mapper.Single.js Mapper.SingleCyclic.js Renderer.CSS.js Renderer.Simple.js Renderer.jQuery.js
var touchSlider=function(b,a){this.element=null;this.options={};this.renderer=null;this.mapper=null;this.loader=null;this.helpers={};this.index=null;this.holder=null;this.box=null;this.init(b,a)};touchSlider.prototype=function(){var t=[],e={},h={},A={},s={},d=null,b=[{start:"mousedown",end:"mouseup",move:"mousemove",leave:"mouseout"},{start:"touchstart",end:"touchend",move:"touchmove",leave:"touchcancel"}],B={start:null,end:null,move:null,leave:null},k={mapper:"",loader:"",renderer:"",helpers:[],holder:"div.holder",box:"div.list",touch:true,lockScroll:false,autoslide:false,direction:"auto"},u=function(F,E){var D=this;this.timer=null;this.element=F;jQuery.extend(true,this.options,k,E||{});this.holder=jQuery(this.options.holder,F).first();if(!this.holder.length){return false}this.box=jQuery(this.options.box,F).first();if(!this.box.length){return false}this.loader=detectConstructor.call(this,e,this.options.loader,touchSlider.Loader);if(!this.loader.init(this,detectConstructorOptions(this.options.loader))){return false}this.mapper=detectConstructor.call(this,h,this.options.mapper,touchSlider.Mapper);if(!this.mapper.init(this,detectConstructorOptions(this.options.mapper))){return false}this.renderer=detectConstructor.call(this,A,this.options.renderer,touchSlider.Renderer);if(!this.renderer.init(this,detectConstructorOptions(this.options.renderer))){return false}else{this.renderer.process(true)}t.push(this);this.index=t.length-1;if(this.options.touch){C.call(this)}if(this.options.helpers){jQuery.each(this.options.helpers,function(J,I){var H={};if(typeof(I)==="object"){for(var G in I){break}H=I[G];I=G}if(s[I]){var K=new s[I]();if(K.init(D,H)){D.helpers[I]=K}}})}this.trigger("onInit");y.call(this);return true},x=function(){clearTimeout(this.timer);this.timer=null},y=function(){if(!this.options.autoslide){return}if(this.timer){return}var E=this.options.direction;var D=this;if(E==="auto"){E=this.mapper.getLastDirection()}this.timer=setTimeout(function(){switch(E){case"prev":o.call(D);break;case"next":p.call(D);break;default:p.call(D);break}},this.options.autoslide)},C=function(E){var F=this.box.get(0);var D=this;var E=typeof(E)==="undefined"?false:E;this.eventIndex="ontouchstart" in window?1:0;this.touchData=null;this.touchOffset=0;jQuery.each(b[this.eventIndex],function(G,H){if(E){if(F.removeEventListener){F.removeEventListener(H,B[G],false)}else{if(document.detachEvent){F.detachEvent("on"+H,B[G])}}}else{B[G]=function(I){n.call(D,I,G)};if(F.addEventListener){F.addEventListener(H,B[G],false)}else{if(document.attachEvent){F.attachEvent("on"+H,B[G])}}}})},n=function(E,D){switch(D){case"start":c.call(this,E);break;case"move":if(!this.touchData){return}v.call(this,E);break;case"end":case"leave":if(!this.touchData){return}g.call(this,E);break}E.stopPropagation()},c=function(F){x.call(this);var E=(this.eventIndex)?F.touches[0].pageX:F.clientX;var D=(this.eventIndex)?F.touches[0].pageY:F.clientY;this.touchData={time:Number(new Date()),x:E,y:D};this.touchOffset=0;this.isScroll=this.options.lockScroll?false:undefined;this.mapper.process("touchStart")},v=function(F){if(this.touchData){var E=(this.eventIndex)?F.touches[0].pageX:F.clientX;var D=(this.eventIndex)?F.touches[0].pageY:F.clientY;this.touchOffset=this.touchData.x-E;if(typeof this.isScrolling==="undefined"){this.isScroll=Math.abs(this.touchOffset)<Math.abs(D-this.touchData.y)}if(!this.isScroll){F.preventDefault();if((F.touches&&F.touches.length>1)||F.scale&&F.scale!==1){return}if(this.mapper.process("touch",this.touchOffset)){this.renderer.process(true)}}}},g=function(){if(!this.isScroll&&this.touchData){if(this.mapper.process("touchEnd")){this.renderer.process()}}this.touchData=null;this.touchOffset=0},f=function(){j.call(this)},o=function(){if(this.mapper.process("prev")){this.renderer.process()}else{this.finish()}},p=function(){if(this.mapper.process("next")){this.renderer.process()}else{this.finish()}},l=function(D){if(this.index===null){return}if(this.mapper.process("set",parseInt(D,10))){this.renderer.process(true)}},r=function(D){if(this.mapper.process("set",D)){this.renderer.process()}},q=function(){x.call(this);this.mapper.stop();y.call(this)},a=function(){if(this.mapper.hasCapability("groupitems")){return this.mapper.getItems()}else{return this.loader.getItems()}},w=function(F,D){var E={};jQuery.extend(E,F,D);return E},m=function(E,F){var D=this;if(D.helpers){jQuery.each(D.helpers,function(G,H){H[E].apply(H,F)})}},z=function(){var D=this;x.call(this);if(this.options.touch){C.call(this,true)}this.trigger("onDestroy");this.renderer.destroy();this.mapper.process("destroy");this.loader.destroy();t.splice(this.index-1,1);delete D},i=function(){jQuery(t).each(function(D,E){if(E.mapper.process("refresh")){E.renderer.refresh()}E.trigger("onLoad")})},j=function(D){clearTimeout(d);jQuery(t).each(function(E,F){if(F.mapper.process("refresh")){F.renderer.refresh()}F.trigger("onRefresh")});if(!D){d=setTimeout(function(){j(true)},500)}};registerLoader=function(D,E){e[D]=E},registerMapper=function(D,E){h[D]=E},registerRenderer=function(D,E){A[D]=E},registerHelper=function(D,E){s[D]=E},detectConstructor=function(F,E,G){if(jQuery.isArray(E)){jQuery.each(E,function(H,I){if(F[I]){E=I;return false}})}else{if(typeof(E)==="object"){for(var D in E){break}E=D}}if(F[E]){return new F[E]()}return new G()},detectConstructorOptions=function(F){var D={};if(typeof(F)==="object"){for(var E in F){break}D=F[E]}return D};jQuery(window).bind("load",function(){i()});jQuery(window).bind("onorientationchange" in window?"orientationchange":"resize",function(){clearTimeout(d);d=setTimeout(function(){j()},100)});return{defaults:k,init:u,refresh:f,next:p,prev:o,set:l,move:r,finish:q,trigger:m,destroy:z,getItems:a,handleOptions:w,registerLoader:registerLoader,registerMapper:registerMapper,registerRenderer:registerRenderer,registerHelper:registerHelper}}();jQuery.fn.reverse=[].reverse;jQuery.fn.touchSlider=function(a,b){return this.each(function(){var c=jQuery(this),e=c.data("touchSlider"),d=typeof a==="object"&&a;if(a==="destroy"){if(e){c.removeData("touchSlider");e[a]()}}else{if(!e){e=new touchSlider(this,d);if(e){c.data("touchSlider",e)}}if(e){if(typeof a==="string"){e[a](b)}}}})};touchSlider.Loader=function(){this.obj=null;this.options={};this.data={}};touchSlider.Loader.prototype={defaults:{},handleOptions:function(b,a){this.obj=b;this.options=b.handleOptions(this.defaults,a)},init:function(b,a){this.handleOptions.call(this,b,a);return true},process:function(){return false},destroy:function(){},getItem:function(a){return false},getItems:function(){return[]},hasChanges:function(){return false}};touchSlider.Mapper=function(){this.options={};this.data={};this.touchData={};this.width=0;this.currentIndex=0;this.currentPosition=0;this.lastDirection=0;this.allowMapping=true;this.capabilities=[]};touchSlider.Mapper.prototype={defaults:{},handleOptions:function(b,a){this.obj=b;this.options=b.handleOptions(this.defaults,a)},init:function(b,a){this.handleOptions.call(this,b,a);return this.process("start")},process:function(c,b){if(!this.allowMapping){return false}var a=false;switch(c){case"start":a=this.start();break;case"stop":a=this.stop();break;case"refresh":a=this.refresh();break;case"next":a=this.next();break;case"prev":a=this.prev();break;case"set":a=this.set(b);break;case"touch":a=this.touchProcess(b);break;case"touchStart":a=this.touchStart();break;case"touchEnd":a=this.touchEnd();break;case"touchReset":a=this.touchReset();break;case"destroy":a=this.destroy();break;default:a=false;break}return a},start:function(){return false},stop:function(){this.enableMapping()},refresh:function(){return false},next:function(){return false},prev:function(){return false},set:function(){return false},touchProcess:function(a){this.touchData={prev:this.touchData.next||0,next:this.currentPosition-a};return true},touchStart:function(){this.data={prev:this.currentPosition,next:this.currentPosition};this.touchData={prev:this.currentPosition,next:this.currentPosition};return true},touchEnd:function(){this.touchData={};return true},touchReset:function(){return this.touchEnd()},destroy:function(){return false},getData:function(){return this.touchData.next?jQuery.extend({},{type:"touch"},this.touchData):jQuery.extend({},{type:"static"},this.data)},getCurrentIndex:function(){return this.currentIndex},enableMapping:function(){this.allowMapping=true},disableMapping:function(){this.allowMapping=false},getLastDirection:function(){return this.lastDirection},setDirection:function(a){this.lastDirection=a},setCapability:function(a){if(jQuery.inArray(a,this.capabilities)===-1){this.capabilities.push(a)}},hasCapability:function(a){return jQuery.inArray(a,this.capabilities)===-1?false:true},getItems:function(){return[]}};touchSlider.Renderer=function(){this.obj=null;this.options={}};touchSlider.Renderer.prototype={defaults:{},handleOptions:function(b,a){this.obj=b;this.options=b.handleOptions(this.defaults,a)},init:function(b,a){this.handleOptions.call(this,b,a);return this.start()},start:function(){return false},process:function(a){return false},refresh:function(){this.process(true)},destroy:function(){}};touchSlider.Helper=function(){this.obj=null;this.options={}};touchSlider.Helper.prototype={defaults:{},handleOptions:function(b,a){this.obj=b;this.options=b.handleOptions(this.defaults,a)},init:function(b,a){this.handleOptions.call(this,b,a);return true},onInit:function(){},onLoad:function(){},onRefresh:function(){},onChange:function(a,b){},onDestroy:function(){}};touchSlider.Helper.Control=function(){touchSlider.Helper.call(this)};touchSlider.Helper.Control.prototype=function(){var d={link:true,element:null},e=function(g,f){this.handleOptions.call(this,g,f);if(this.obj.mapper.hasCapability("skipcounter")){return false}this.element=jQuery('<div class="switcher" />');if(jQuery(this.options.element,this.obj.element).length){jQuery(this.options.element,this.obj.element).append(this.element)}else{jQuery(this.obj.element).append(this.element)}this.tag=this.options.link?"a":"span";return true},c=function(){var g=this;g.element.html("");var f=this.obj.getItems();if(f.length>1){jQuery(f).each(function(h){var j=jQuery("<"+g.tag+">"+h+"</"+g.tag+">");j.data("index",h);g.element.append(j);if(g.options.link){j.bind("click",function(){g.obj.move(jQuery(this).data("index"));return false})}});jQuery(this.tag,this.element).eq(this.obj.mapper.getCurrentIndex()).addClass("active")}},a=function(f,g){jQuery(this.tag,this.element).removeClass("active");jQuery(this.tag,this.element).eq(g).addClass("active")},b=function(){this.element.remove()};return jQuery.extend(new touchSlider.Helper(),{defaults:d,init:e,onInit:c,onRefresh:c,onChange:a,onDestroy:b})}();touchSlider.prototype.registerHelper("control",touchSlider.Helper.Control);touchSlider.Helper.Counter=function(){touchSlider.Helper.call(this)};touchSlider.Helper.Counter.prototype=function(){var d=function(f,e){this.handleOptions.call(this,f,e);if(this.obj.mapper.hasCapability("skipcounter")){return false}this.element=jQuery('<span class="counter" />');jQuery(this.obj.element).append(this.element);return true},c=function(){var e=this.obj.getItems();if(e.length){this.element.html(1+"/"+e.length)}},a=function(f,g){var e=this.obj.getItems();if(e.length){this.element.html((g+1)+"/"+e.length)}},b=function(){this.element.remove()};return jQuery.extend(new touchSlider.Helper(),{init:d,onInit:c,onChange:a,onDestroy:b})}();touchSlider.prototype.registerHelper("counter",touchSlider.Helper.Counter);touchSlider.Helper.PrevNext=function(){touchSlider.Helper.call(this)};touchSlider.Helper.PrevNext.prototype=function(){var c={prevLink:null,nextLink:null,inactive:true,inactiveClass:null,prevText:"< Prev",nextText:"Next >"},d=function(h,f){this.handleOptions.call(this,h,f);var g=this.obj.element;var e=this.obj;this.prevLink=jQuery(this.options.prevLink,g);if(!this.prevLink.length){this.prevLink=jQuery('<a href="#" class="prev">'+this.options.prevText+"</a>");this.prevLink.appendTo(g)}this.prevLink.bind("click",function(){e.prev();return false});this.nextLink=jQuery(this.options.nextLink,g);if(!this.nextLink.length){this.nextLink=jQuery('<a href="#" class="next">'+this.options.nextText+"</a>");this.nextLink.appendTo(g)}this.nextLink.bind("click",function(){e.next();return false});if(this.options.inactive&&!this.obj.mapper.hasCapability("cyclic")){if(this.options.inactiveClass){this.prevLink.addClass(this.options.inactiveClass)}else{this.prevLink.hide()}}return true},a=function(f,g){if(this.obj.mapper.hasCapability("cyclic")||!this.options.inactive){return}var e=this.obj.getItems();if(e.length){if(this.options.inactiveClass){this.prevLink.removeClass(this.options.inactiveClass);this.nextLink.removeClass(this.options.inactiveClass)}else{this.prevLink.show();this.nextLink.show()}if(g===0){if(this.options.inactiveClass){this.prevLink.addClass(this.options.inactiveClass)}else{this.prevLink.hide()}}if(g===e.length-1){if(this.options.inactiveClass){this.nextLink.addClass(this.options.inactiveClass)}else{this.nextLink.hide()}}}},b=function(){this.prevLink.remove();this.nextLink.remove()};return jQuery.extend(new touchSlider.Helper(),{defaults:c,init:d,onChange:a,onDestroy:b})}();touchSlider.prototype.registerHelper("prev-next",touchSlider.Helper.PrevNext);touchSlider.Helper.SelectedItem=function(){touchSlider.Helper.call(this)};touchSlider.Helper.SelectedItem.prototype=function(){var d={classname:"active"},e=function(g,f){this.handleOptions.call(this,g,f);if(this.obj.mapper.hasCapability("skipcounter")){return false}return true},c=function(){var f=this.obj.loader.getItems();if(f.length){jQuery(f.get(0)).addClass(this.options.classname)}},a=function(g,h){var f=this.obj.loader.getItems();if(f.length){jQuery(f).removeClass(this.options.classname);f.filter(function(j){return j==h}).addClass(this.options.classname)}},b=function(){var f=this.obj.loader.getItems();jQuery(f).removeClass(this.options.classname)};return jQuery.extend(new touchSlider.Helper(),{defaults:d,init:e,onInit:c,onChange:a,onDestroy:b})}();touchSlider.prototype.registerHelper("selected-item",touchSlider.Helper.SelectedItem);touchSlider.Loader.Static=function(){touchSlider.Loader.call(this)};touchSlider.Loader.Static.prototype=function(){var c={item:"div.item"},d=function(g,f){this.handleOptions.call(this,g,f);return this.process()},b=function(){var h=this.obj.element;var g=this.options;var f=jQuery(g.item,h);if(!f.length){return false}this.data={items:f};return true},a=function(){return this.data.items},e=function(f){if(typeof f==="undefined"||f>=this.data.items.length){f=this.data.items.length-1}return this.data.items[f]};return jQuery.extend(new touchSlider.Loader(),{defaults:c,init:d,process:b,getItems:a,getItem:e})}();touchSlider.prototype.registerLoader("static",touchSlider.Loader.Static);touchSlider.Mapper.Auto=function(){touchSlider.Mapper.call(this)};touchSlider.Mapper.Auto.prototype=function(){var f={center:true},b=function(){this.setCapability("groupitems");this.previousIndex=null;this.previousPosition=null;this.currentPosition=0;this.graphRealIndex=0;this.graphItems=[];this.refresh();return true},k=function(){var p=this.obj.loader;var s=this.obj.holder;var r=p.getItems();this.width=s.width();var t=this.width;var q=this;this.graphItems=[];j.call(this,r);r.each(function(x,y){var v=this.offsetWidth;var u=q.graphItems.length;if(x==0){if(v>t){q.graphItems.push([v,new Array(new Array(x,v)),0])}else{q.graphItems.push([v,new Array(new Array(x,v))])}i.call(q,x)}else{if(q.graphItems[u-1][0]+v<=t){q.graphItems[u-1][0]+=v;q.graphItems[u-1][1].push(new Array(x,v));i.call(q,x)}else{if(v>t){q.graphItems.push([v,new Array(new Array(x,v)),0])}else{q.graphItems.push([v,new Array(new Array(x,v))])}i.call(q,x)}}});if(this.currentIndex>=this.graphItems.length){g.call(this,this.graphItems.length-1)}a.call(this);d.call(this);return true},h=function(){var q=this;var p=this.obj.loader.getItems();var v=0;var u=0;var r=this.width;$.each(this.graphItems,function(w){if(w<q.currentIndex){u+=this[0]}v+=this[0]});var s=this.graphItems[this.currentIndex].length>2?true:false;if(this.options.center&&v<this.width){var t=r/2-v/2;o.call(t);this.data={prev:this.previousPosition,next:this.currentPosition};return true}var t=0;if(this.currentIndex<this.graphItems.length-1||(this.currentIndex>=this.graphItems.length-1&&s)){if(s&&this.graphItems[currentIndex][0]-r>this.graphItems[this.currentIndex][2]){this.graphItems[this.currentIndex][2]+=r;if(this.graphItems[this.currentIndex][0]-this.graphItems[this.currentIndex][2]>r){o.call(this,this.currentPosition-r)}else{o.call(this,this.currentPosition-(this.graphItems[this.currentIndex][0]-this.graphItems[this.currentIndex][2]));this.graphItems[this.currentIndex][2]+=this.graphItems[this.currentIndex][0]-this.graphItems[this.currentIndex][2];this.graphItems[this.currentIndex][2]-=r}}else{if(typeof(this.graphItems[this.currentIndex+1])!="undefined"){if(this.graphItems[this.currentIndex+1].length>2){t=0-(u+this.graphItems[this.currentIndex][0])}else{t=0-(u+this.graphItems[this.currentIndex][0]+this.graphItems[this.currentIndex+1][0]/2)+r/2}if(v+t>r){g.call(this,this.currentIndex+1);o.call(this,t)}else{g.call(this,this.graphItems.length-1);o.call(this,0-(v-r))}}}}if(this.currentIndex!==this.previousIndex){this.obj.trigger("onChange",[this.previousIndex,this.currentIndex])}this.data={prev:this.previousPosition,next:this.currentPosition};return true},e=function(){var q=this;var p=this.obj.loader.getItems();var v=0;var u=0;var r=this.width;$.each(this.graphItems,function(w){if(w<q.currentIndex){u+=this[0]}v+=this[0]});var s=this.graphItems[this.currentIndex].length>2?true:false;if(this.options.center&&v<this.width){var t=r/2-v/2;o.call(t);this.data={prev:this.previousPosition,next:this.currentPosition};return true}var t=0;if(this.currentIndex>0||(this.currentIndex<=0&&s)){if(s&&this.graphItems[this.currentIndex][2]>0){this.graphItems[this.currentIndex][2]-=r;if(this.graphItems[this.currentIndex][2]>=0){o.call(this,this.currentPosition+r)}else{o.call(this.currentPosition+(this.graphItems[this.currentIndex][2]+r));this.graphItems[this.currentIndex][2]=0}}else{if(typeof(this.graphItems[this.currentIndex-1])!="undefined"){if(this.graphItems[this.currentIndex-1].length>2){t=0-(u-r);this.graphItems[this.currentIndex-1][2]=this.graphItems[this.currentIndex-1][0]-r}else{t=0-(u-this.graphItems[this.currentIndex-1][0]/2)+r/2}if(t<0){g.call(this,this.currentIndex-1);o.call(this,t)}else{g.call(this,0);o.call(this,0)}}}}if(this.currentIndex!==this.previousIndex){this.obj.trigger("onChange",[this.previousIndex,this.currentIndex])}this.data={prev:this.previousPosition,next:this.currentPosition};return true},l=function(){},n=function(){if(this.touchData.next<this.currentPosition){this.next()}else{if(this.touchData.next>this.currentPosition){this.prev()}}this.touchData={};return true},m=function(){j.call(this)},a=function(){var q=this.width;var p=this.obj.loader.getItems();jQuery.each(this.graphItems,function(r,s){if(s[0]<q){var t=s[0];s[0]=q;$(s[1]).each(function(u,v){v[1]=parseInt(q*v[1]/t);$(p[v[0]]).css("width",v[1])})}})},j=function(p){jQuery.each(function(){jQuery(this).css("width","")})},i=function(p){if(p==this.graphRealIndex){g.call(this,this.graphItems.length-1)}},g=function(q){var p=this.obj.loader.getItems();this.previousIndex=this.currentIndex;this.currentIndex=q;if(this.graphItems.length){this.graphRealIndex=this.graphItems[this.currentIndex][1][0][0]}},o=function(p){p=parseInt(p,10);if(p!=this.currentPosition){this.previousPosition=this.currentPosition;this.currentPosition=p}},c=function(){return this.graphItems},d=function(){var q=this;var p=this.obj.loader.getItems();var v=0;var u=0;var r=this.width;$.each(this.graphItems,function(w){if(w<q.currentIndex){u+=this[0]}v+=this[0]});var s=this.graphItems[this.currentIndex].length>2?true:false;if(this.options.center&&v<this.width){var t=r/2-v/2;o.call(t);this.data={prev:this.previousPosition,next:this.currentPosition};return true}var t=0;if(s){t=0-u}else{t=0-(u+this.graphItems[this.currentIndex][0]/2)+r/2}if(t>=0){o.call(this,0)}else{if(v+t<=r){o.call(this,0-(v-r))}else{o.call(this,t)}}if(this.currentIndex!==this.previousIndex){this.obj.trigger("onChange",[this.previousIndex,this.currentIndex])}this.data={prev:this.previousPosition,next:this.currentPosition};return true};return jQuery.extend(new touchSlider.Mapper(),{start:b,refresh:k,next:h,prev:e,touchEnd:n,destroy:m,getItems:c,})}();touchSlider.prototype.registerMapper("auto",touchSlider.Mapper.Auto);touchSlider.Mapper.Content=function(){touchSlider.Mapper.call(this)};touchSlider.Mapper.Content.prototype=function(){var e={shift:"80%"},g=function(){this.setCapability("skipcounter");var j=this.obj.holder;this.width=j.width();this.offset=(this.options.shift.indexOf("%")!==-1)?parseInt((this.width*this.options.shift.substr(0,this.options.shift.length-1))/100,10):parseInt(this.options.shift,10);var i=this.obj.loader.getItems();this.itemsWidth=0;var h=this;jQuery.each(i,function(){h.itemsWidth+=this.offsetWidth});if(this.itemsWidth<=this.width){return false}return true},b=function(){c.call(this,this.currentPosition-this.offset);this.setDirection("next");return true},d=function(){c.call(this,this.currentPosition+this.offset);this.setDirection("prev");return true},f=function(k){var i=this.obj.loader.getItems();if(typeof k==="undefined"||k>i.length-1||k<0||k===this.currentIndex){return false}var h=this;var j=0;jQuery.each(i,function(m,n){if(m<k){j+=jQuery(n).width()}else{return false}});var l=0-(j-this.width/2)-$(i[k]).width()/2;c.call(this,l);return true},a=function(){if(this.touchData.next<this.currentPosition){this.next()}else{if(this.touchData.next>this.currentPosition){this.prev()}else{}}this.touchData={};return true},c=function(j){var i=this.currentPosition||0;var h=this.obj.loader.getItems();if(j>0){this.currentPosition=0;this.obj.trigger("onChange",[h.length-1,0,this.currentPosition])}else{if(this.itemsWidth+j<=this.width){this.currentPosition=0-(this.itemsWidth-this.width);this.obj.trigger("onChange",[0,h.length-1,this.currentPosition])}else{this.currentPosition=j;this.obj.trigger("onChange",["","",this.currentPosition])}}this.data={prev:i,next:this.currentPosition}};return jQuery.extend(new touchSlider.Mapper(),{defaults:e,start:g,refresh:g,next:b,prev:d,set:f,touchEnd:a})}();touchSlider.prototype.registerMapper("content",touchSlider.Mapper.Content);touchSlider.Mapper.Index=function(){touchSlider.Mapper.call(this)};touchSlider.Mapper.Index.prototype=function(){var e={loop:false},h=function(){var j=this.obj.holder;this.width=j.width();if(this.options.loop){this.setCapability("cyclic")}var i=this.obj.loader.getItems();c.call(this,i,this.currentIndex);return true},b=function(){var i=this.obj.loader.getItems();if(this.currentIndex<i.length-1){var j=this.currentIndex+1;c.call(this,i,j);this.setDirection("next");return true}else{if(this.options.loop){c.call(this,i,0);this.setDirection("next");return true}else{return false}}},d=function(){var i=this.obj.loader.getItems();if(this.currentIndex===0){if(this.options.loop){c.call(this,i,i.length-1);this.setDirection("prev");return true}else{return false}}else{var j=this.currentIndex-1;c.call(this,i,j);this.setDirection("prev");return true}},g=function(j){var i=this.obj.loader.getItems();if(typeof j==="undefined"||j>i.length-1||j<0||j===this.currentIndex){return false}c.call(this,i,j);return true},a=function(){f.call(this,this.touchData.next);this.touchData={};return true},f=function(o){var k=this.obj.loader.getItems();var m=this.currentPosition-o;var l=this.currentIndex;if(!m){return}var n=0;var i=this.width/2;var j=this;jQuery.each(k,function(p,q){n=n+jQuery(q).width();if((j.currentPosition-m<=i)&&((j.currentPosition-m)+n)>i){if(m>0){l=j.currentIndex+(p-j.currentIndex);if(l===j.currentIndex){j.next()}else{j.setDirection("next");c.call(j,k,l)}}else{l=j.currentIndex-(j.currentIndex-p);if(l===j.currentIndex){j.prev()}else{j.setDirection("prev");c.call(j,k,l)}}return false}})},c=function(m,l){var p=this.currentPosition;var j=m.slice(0,l);var i=m.slice(l+1);var q=0;var o=0;jQuery.each(j,function(r,s){q=q+jQuery(s).width()});jQuery.each(i,function(r,s){o=o+jQuery(s).width()});var k=jQuery(m[l]).width();if((q+k/2)<this.width/2){this.currentPosition=0}else{if((o+k/2)<this.width/2){var n=q+o+k;this.currentPosition=0-(n-this.width)}else{this.currentPosition=0-(q-this.width/2)-k/2}}if(this.currentIndex!==l){this.obj.trigger("onChange",[this.currentIndex,l])}this.currentIndex=l;this.data={prev:p,next:this.currentPosition}};return jQuery.extend(new touchSlider.Mapper(),{defaults:e,start:h,refresh:h,set:g,next:b,prev:d,touchEnd:a})}();touchSlider.prototype.registerMapper("index",touchSlider.Mapper.Index);touchSlider.Mapper.IndexCyclic=function(){touchSlider.Mapper.call(this)};touchSlider.Mapper.IndexCyclic.prototype=function(){var b=function(){this.clones=[];this.offset=0;this.futurePosition="";this.setCapability("cyclic");this.refresh();return true},g=function(){this.enableMapping();if(this.futurePosition!==""){this.data={prev:this.currentPosition,next:this.futurePosition};this.currentPosition=this.futurePosition;this.futurePosition="";this.obj.renderer.process(true)}},f=function(){var l=this.obj.loader;var n=this.obj.holder;this.currentIndex=this.currentIndex||0;this.width=n.width();var m=l.getItems();e.call(this);k.call(this,m,this.currentIndex);i.call(this,this.currentIndex);return true},d=function(){var m=this.obj.loader.getItems();var o=this.currentPosition;var q=this.currentIndex;var l=[];var n=0;var p=0;if(this.currentIndex<m.length-1){this.currentIndex++;l=m.slice(0,this.currentIndex);$.each(l,function(r,s){n=n+$(s).width()});p=$(m[this.currentIndex]).width();this.currentPosition=(0-(n-this.width/2)-p/2)-this.offset}else{this.currentIndex++;l=m.slice(0,this.currentIndex);$.each(l,function(r,s){n=n+$(s).width()});p=$(m[this.currentIndex]).width();this.currentPosition=(0-(n-this.width/2)-this.clones[1].width()/2)-this.offset;this.futurePosition=(this.width/2-$(m[0]).width()/2)-this.offset;this.currentIndex=0}this.setDirection("next");this.data={prev:o,next:this.currentPosition};if(this.currentIndex!==q){this.obj.trigger("onChange",[this.currentIndex,q])}return true},c=function(){var m=this.obj.loader.getItems();var o=this.currentPosition;var q=this.currentIndex;var l=[];var n=0;var p=0;if(this.currentIndex===0){this.currentIndex=m.length-1;l=m.slice(0,m.length-1);$.each(l,function(r,s){n=n+$(s).width()});p=$(m[this.currentIndex]).width();this.currentPosition=(0+this.width/2-this.clones[0].width()/2);this.futurePosition=(0-(n-this.width/2)-p/2)-this.offset}else{this.currentIndex--;l=m.slice(0,this.currentIndex);$.each(l,function(r,s){n=n+$(s).width()});p=$(m[this.currentIndex]).width();this.currentPosition=(0-(n-this.width/2)-p/2)-this.offset;this.futurePosition=(this.width/2-$(m[0]).width()/2)-this.offset}this.setDirection("prev");this.data={prev:o,next:this.currentPosition};if(this.currentIndex!==q){this.obj.trigger("onChange",[this.currentIndex,q])}return true},i=function(m){var l=this.obj.loader.getItems();if(typeof m==="undefined"||m>l.length-1||m<0||m===this.currentIndex){return false}k.call(this,l,m);return true},j=function(){var l=a.call(this,this.touchData.next);this.touchData={};return true},e=function(){this.clones=[];this.offset=0;$(".clone-first, .clone-last",this.obj.box).remove();var o=this.obj.loader.getItem(0);if(o){var n=$(o).clone(true);this.obj.box.append(n);n.addClass("clone-first");this.clones.push(n);this.offset=n.width()}var m=this.obj.loader.getItem();if(m){var l=$(m).clone(true);this.obj.box.prepend(l);l.addClass("clone-last");this.clones.push(l)}},h=function(){var l=this.obj.loader.getItems();l.css("width","");jQuery.each(this.clones,function(){jQuery(this).remove()})},a=function(r){var m=this.obj.loader.getItems();var p=this.currentPosition-r;var n=this.currentIndex;if(!p){return}var q=0;var l=this.width/2;var o=this;$.each(m,function(s,t){q=q+$(t).width();if((o.currentPosition-p<=l)&&((o.currentPosition-p)+q)>l){if(p>0){n=o.currentIndex+(s-o.currentIndex);if(n===o.currentIndex){o.next()}else{o.setDirection("next");k.call(o,m,n,p)}}else{n=o.currentIndex-(o.currentIndex-s);if(n===o.currentIndex){o.prev()}else{o.setDirection("prev");k.call(o,m,n,p)}}return false}});return n},k=function(m,o,r){var p=this.currentPosition;var s=this.currentIndex;var l=m.slice(0,o);var n=0;var q=0;$.each(l,function(t,u){n=n+$(u).width()});if(o<m.length-1){this.currentIndex=o;q=$(m[o]).width();this.currentPosition=(0-(n-this.width/2)-q/2)-this.offset}else{o=this.currentIndex+1;q=$(m[o]).width();this.currentPosition=(0-(n-this.width/2)-q/2)-this.offset;this.futurePosition=(0-(n-this.width/2)-$(m[0]).width()/2)-this.offset;this.currentIndex=0}this.data={prev:p,next:this.currentPosition};if(this.currentIndex!==s){this.obj.trigger("onChange",[this.currentIndex,s])}};return jQuery.extend(new touchSlider.Mapper(),{start:b,stop:g,refresh:f,next:d,prev:c,set:i,touchEnd:j,destroy:h})}();touchSlider.prototype.registerMapper("index-cyclic",touchSlider.Mapper.IndexCyclic);touchSlider.Mapper.Single=function(){touchSlider.Mapper.call(this)};touchSlider.Mapper.Single.prototype=function(){var f={loop:false},h=function(){var i=this.obj.loader;var k=this.obj.holder;this.width=k.width();var m=this.width;var l=this.currentPosition||0;this.currentIndex=this.currentIndex||0;this.currentPosition=0-this.currentIndex*this.width;this.data={prev:l,next:this.currentPosition};var j=i.getItems();jQuery(j).each(function(n,o){e(o,m)});return true},c=function(){var i=this.obj.loader.getItems();var j=this.currentPosition;var k=this.currentIndex;if(this.currentIndex<i.length-1){this.currentIndex++;this.currentPosition=0-this.currentIndex*this.width;this.setDirection("next")}else{if(this.options.loop){this.currentIndex=0;this.currentPosition=0;this.setDirection("next")}else{this.currentPosition=0-this.currentIndex*this.width}}if(this.currentIndex!==k){this.obj.trigger("onChange",[k,this.currentIndex])}this.data={prev:j,next:this.currentPosition};return true},d=function(){var i=this.obj.loader.getItems();var j=this.currentPosition;var k=this.currentIndex;if(this.currentIndex===0){if(this.options.loop){this.currentIndex=i.length-1;this.currentPosition=0-this.width*this.currentIndex;this.setDirection("prev")}else{this.currentIndex=0;this.currentPosition=0}}else{this.currentIndex--;this.currentPosition=0-this.width*this.currentIndex-1;this.setDirection("prev")}if(this.currentIndex!==k){this.obj.trigger("onChange",[k,this.currentIndex])}this.data={prev:j,next:this.currentPosition};return true},g=function(j){var i=this.obj.loader.getItems();if(typeof j==="undefined"||j>i.length-1||j<0||j===this.currentIndex){return false}var k=this.currentPosition;var l=this.currentIndex;this.currentIndex=j;this.currentPosition=0-j*this.width;if(this.currentIndex!==l){this.obj.trigger("onChange",[l,this.currentIndex])}this.data={prev:k,next:this.currentPosition};return true},b=function(){if(this.touchData.next<this.currentPosition){this.currentPosition=this.touchData.next;this.next()}else{if(this.touchData.next>this.currentPosition){this.currentPosition=this.touchData.next;this.prev()}else{}}this.touchData={};return true},a=function(){var i=this.obj.loader.getItems();i.css("width","")},e=function(j,i){jQuery(j).width(i)};return jQuery.extend(new touchSlider.Mapper(),{defaults:f,start:h,refresh:h,next:c,prev:d,set:g,touchEnd:b,destroy:a})}();touchSlider.prototype.registerMapper("single",touchSlider.Mapper.Single);touchSlider.Mapper.SingleCyclic=function(){touchSlider.Mapper.call(this)};touchSlider.Mapper.SingleCyclic.prototype=function(){var a=function(){this.clones=[];this.offset=0;this.futurePosition="";this.setCapability("cyclic");this.refresh();return true},g=function(){this.enableMapping();if(this.futurePosition!==""){this.data={prev:this.currentPosition,next:this.futurePosition};this.currentPosition=this.futurePosition;this.futurePosition="";this.obj.renderer.process(true)}},e=function(){var k=this.obj.loader;var m=this.obj.holder;this.width=m.width();var o=this.width;var n=this.currentPosition||0;var l=k.getItems();jQuery(l).each(function(p,q){f(q,o)});if(d.call(this)){this.offset=o}if(this.clones.length){jQuery(this.clones).each(function(p,q){f(q,o)});this.offset=o}this.currentIndex=this.currentIndex||0;this.currentPosition=0-this.currentIndex*this.width-this.offset;this.data={prev:n,next:this.currentPosition};return true},c=function(){var k=this.obj.loader.getItems();var m=this.currentPosition;var n=this.currentIndex;if(this.currentIndex<k.length-1){this.currentIndex++;this.currentPosition=0-this.currentIndex*this.width-this.offset;this.setDirection("next")}else{var l=this.currentIndex+1;this.currentPosition=0-l*this.width-this.offset;this.futurePosition=0-this.width;this.currentIndex=0;this.setDirection("next")}if(this.currentIndex!==n){this.obj.trigger("onChange",[n,this.currentIndex])}this.data={prev:m,next:this.currentPosition};return true},b=function(){var k=this.obj.loader.getItems();var l=this.currentPosition;var m=this.currentIndex;if(this.currentIndex===0){this.currentIndex=k.length-1;this.currentPosition=0;this.futurePosition=0-this.width*this.currentIndex-this.offset;this.setDirection("prev")}else{this.currentIndex--;this.currentPosition=0-this.width*this.currentIndex-1-this.offset;this.setDirection("prev")}if(this.currentIndex!==m){this.obj.trigger("onChange",[m,this.currentIndex])}this.data={prev:l,next:this.currentPosition};return true},h=function(l){var k=this.obj.loader.getItems();if(typeof l==="undefined"||l>k.length-1||l<0||l===this.currentIndex){return false}var m=this.currentPosition;var n=this.currentIndex;this.currentIndex=l;this.currentPosition=0-l*this.width-this.offset;if(this.currentIndex!==n){this.obj.trigger("onChange",[n,this.currentIndex])}this.data={prev:m,next:this.currentPosition};return true},j=function(){if(this.touchData.next<this.currentPosition){this.currentPosition=this.touchData.next;this.next()}else{if(this.touchData.next>this.currentPosition){this.currentPosition=this.touchData.next;this.prev()}else{}}this.touchData={};return true},i=function(){var k=this.obj.loader.getItems();k.css("width","");jQuery.each(this.clones,function(){jQuery(this).remove()})},d=function(){if(!this.clones.length||this.obj.loader.hasChanges()){var n=this.obj.loader.getItem(0);if(n){var m=jQuery(n).clone(true);this.obj.box.append(m);m.addClass("clone-first");this.clones.push(m)}var l=this.obj.loader.getItem();if(l){var k=jQuery(l).clone(true);this.obj.box.prepend(k);k.addClass("clone-last");this.clones.push(k)}this.offset=0;return true}return false},f=function(l,k){jQuery(l).width(k)};return jQuery.extend(new touchSlider.Mapper(),{start:a,stop:g,refresh:e,set:h,next:c,prev:b,touchEnd:j,destroy:i})}();touchSlider.prototype.registerMapper("single-cyclic",touchSlider.Mapper.SingleCyclic);touchSlider.Renderer.CSS=function(){touchSlider.Renderer.call(this)};touchSlider.Renderer.CSS.prototype=function(){var f={duration:500},d="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),g=false,b=function(){var j=document.body||document.documentElement;var i=j.style;g=i.WebkitTransition!==undefined||i.MozTransition!==undefined||i.transition!==undefined},a=function(){var i=this.obj.box;var j=this.obj;if(this.delay){i.css({"-webkit-transition-duration":"0ms","-moz-transition-duration":"0ms","transition-duration":"0ms"});this.delay=0}j.finish()},h=function(){if(!g){return false}this.delay=0;var i=this.obj.box;i.css({"-webkit-transition-property":"-webkit-transform","-moz-transition-property":"-moz-transform","transition-property":"transform"});return true},e=function(k){this.delay=typeof(k)==="undefined"?this.options.duration:0;var n=this.obj.box;var i=this.obj.mapper;var m=i.getData();var q=this;var p=parseInt(m.next,10);if(m.prev===p){a.call(q)}if(this.delay){var j=i.width;var o=Math.abs(m.prev-m.next);var l=parseInt(((o>j?j:o)*this.delay)/j,10);n.css({"-webkit-transition-duration":l+"ms","-moz-transition-duration":l+"ms","transition-duration":l+"ms"});i.disableMapping();setTimeout(function(){a.call(q)},l)}if(d){n.css({"-webkit-transform":"translate3d("+p+"px,0,0)",transform:"translate3d("+p+"px,0,0)"})}else{n.css({"-webkit-transform":"translate("+p+"px,0)","-moz-transform":"translate("+p+"px,0)",transform:"translate("+p+"px,0)"})}},c=function(){this.obj.box.css({"-webkit-transform":"none","-moz-transform":"none",transform:"none","-webkit-transition":"none 0","-moz-transition":"none 0",transition:"none 0"})};b();return jQuery.extend(new touchSlider.Renderer(),{start:h,defaults:f,process:e,destroy:c})}();touchSlider.prototype.registerRenderer("css",touchSlider.Renderer.CSS);touchSlider.Renderer.Simple=function(){touchSlider.Renderer.call(this)};touchSlider.Renderer.Simple.prototype=function(){var c=function(){return true},b=function(){var d=this.obj.mapper.getData();if(d.type==="touch"){return false}this.obj.box.css({"margin-left":d.next+"px"});this.obj.finish();return true},a=function(){this.obj.box.css({"margin-left":"0"})};return jQuery.extend(new touchSlider.Renderer(),{start:c,process:b,destroy:a})}();touchSlider.prototype.registerRenderer("simple",touchSlider.Renderer.Simple);touchSlider.Renderer.jQuery=function(){touchSlider.Renderer.call(this)};touchSlider.Renderer.jQuery.prototype=function(){var c={duration:500},d=function(){return true},b=function(f){var e=typeof(f)==="undefined"?this.options.duration:0;var j=this.obj.mapper;var i=this.obj;var h=j.getData();if(h.prev===h.next){return}if(e){var g=j.width;var k=Math.abs(h.prev-h.next);e=parseInt(((k>g?g:k)*e)/g,10);j.disableMapping();this.obj.box.animate({"margin-left":h.next+"px"},e,function(){i.finish()})}else{this.obj.box.css({"margin-left":h.next+"px"})}},a=function(){this.obj.box.css({"margin-left":"0"})};return jQuery.extend(new touchSlider.Renderer(),{start:d,defaults:c,process:b,destroy:a})}();touchSlider.prototype.registerRenderer("jquery",touchSlider.Renderer.jQuery);